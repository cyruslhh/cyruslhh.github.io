<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> CS180 Project 2 | Cyrus Hung </title> <meta name="author" content="Cyrus Hung"> <meta name="description" content="Fun with Filters and Frequencies"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://cyruslhh.github.io/projects/CS180_project_2/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Cyrus</span> Hung </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Me </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">CS180 </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/projects/CS180_project_1/">Project 1</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/CS180_project_2/">Project 2</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/CS180_project_3/">Project 3</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/CS180_project_4/">Project 4</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">CS180 Project 2</h1> <p class="post-description">Fun with Filters and Frequencies</p> </header> <article> <h2 id="task-11-finite-difference-operator">Task 1.1: Finite Difference Operator</h2> <p>First, we will use a simple finite difference operator applied in the x and y direction.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> $$ D_x = \begin{bmatrix} 1 &amp; -1 \end{bmatrix} $$ <div class="caption"> Finite difference in the x direction </div> </div> <div class="col-sm mt-3 mt-md-0"> $$ D_y = \begin{bmatrix} 1 \\ -1 \end{bmatrix} $$ <div class="caption"> Finite difference in the y direction </div> </div> </div> <p>As we learned in class, this approximates a partial derivative in the x and y direction, and large values represent a sudden change in pixel values - likely some type of edge. We can use these operators applied as a convolution onto this greyscale image of a cameraman.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man-480.webp 480w,/assets/img/CS180/Project_2/camera_man-800.webp 800w,/assets/img/CS180/Project_2/camera_man-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man </div> </div> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_x-480.webp 480w,/assets/img/CS180/Project_2/camera_man_x-800.webp 800w,/assets/img/CS180/Project_2/camera_man_x-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_x.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man x" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man D_x </div> </div> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_y-480.webp 480w,/assets/img/CS180/Project_2/camera_man_y-800.webp 800w,/assets/img/CS180/Project_2/camera_man_y-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_y.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="monastery" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man D_y </div> </div> </div> <p>We can improve upon this by combining the derivatives in the x and y directions using a simple L2 formula, providing a better view of the edges of the images. After that, we can easily binarize it by trying out a range of thresholds. Noise that is below this threshold will be eliminated, while values at or above the threshold will be set to 1 to show that we’ve found an edge. The computation for the magnitude is simply:</p> \[M = \sqrt{D_x^2 + D_y^2}\] <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_edges-480.webp 480w,/assets/img/CS180/Project_2/camera_man_edges-800.webp 800w,/assets/img/CS180/Project_2/camera_man_edges-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_edges.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Gradient Magnitude of Camera Man </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_0.1-480.webp 480w,/assets/img/CS180/Project_2/camera_man_0.1-800.webp 800w,/assets/img/CS180/Project_2/camera_man_0.1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_0.1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.1" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Binarized Gradient Magnitude (threshold=0.1) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_0.15-480.webp 480w,/assets/img/CS180/Project_2/camera_man_0.15-800.webp 800w,/assets/img/CS180/Project_2/camera_man_0.15-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_0.15.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Binarized Gradient Magnitude (threshold=0.15) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_0.2-480.webp 480w,/assets/img/CS180/Project_2/camera_man_0.2-800.webp 800w,/assets/img/CS180/Project_2/camera_man_0.2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_0.2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Binarized Gradient Magnitude (threshold=0.2) </div> </div> </div> <p>As one can see here, a lower threshold is ineffective at removing noise (such as the grass at the bottom half of the image) while the higher thresholds contained more junk data. Threshold=0.15 strikes a decent balance, keeping important edges and details in the background (such as the tower) while keeping just a bit of grass at the bottom of the image. It’s also interesting to note that edges in the background, which appear more gray, tended to have smaller magnitudes simply because the color values aren’t as strong as the foreground - showing a fundamental flaw in our operator with its lack of normalization.</p> <h2 id="task-12-derivative-of-gaussian-filter">Task 1.2: Derivative of Gaussian Filter</h2> <p>Even with a decent threshold though, we can see that there is a lot of noise with our difference operator. By first applying a smoothing operator, we can remove much of the noise. Here, we’ll create a Gaussian filter to essentially blur the image and repeat the process above, yielding the following image and the corresponding magnitude:</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man blur" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man after Gaussian Filter (ksize=5, sigma=1) </div> </div> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_x-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_x-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_x-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_x.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man blur magnitude" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man Blurred, X_derivative </div> </div> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_y-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_y-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_y-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_y.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man blur magnitude" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man Blurred, Y_derivative </div> </div> <div class="col-sm mt-3 mt-md-0" style="height: 50%;"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_magnitude-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_magnitude-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_magnitude-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_magnitude.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man blur magnitude" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Camera Man Blurred Magnitude (l2) </div> </div> </div> <p>As with before we can binarize this and use a range of thresholds to see which works the best.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_0.04-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_0.04-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_0.04-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_0.04.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Threshold=0.04 </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_0.08-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_0.08-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_0.08-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_0.08.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.1" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Threshold=0.08 </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_0.12-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_0.12-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_0.12-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_0.12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Threshold=0.12 </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_0.16-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_0.16-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_0.16-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_0.16.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Threshold=0.16 </div> </div> </div> <p>As we can see here, a threshold of 0.12 pretty much removed all noise from the image and was able to preserve many of the edges within the image. The difference between this edge image from our attempt previously is that it’s much smoother - rather than “blocky” straight lines and lots of little dots caused by noise we have continuous looking lines that much better match the contours of the cameraman’s body. The smoothing filter essentially smoothed out the detected edges and gave us a much better result than before.</p> <h3 class="text-center text-decoration-underline my-4">Combining Convolutions</h3> <p>In order to make this operation even faster, we can actually combine the 2 separate convolutions - blurring and then the difference operators - into one before applying it to the image.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/gaussian-480.webp 480w,/assets/img/CS180/Project_2/gaussian-800.webp 800w,/assets/img/CS180/Project_2/gaussian-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/gaussian.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Gaussian </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/gaussian_x-480.webp 480w,/assets/img/CS180/Project_2/gaussian_x-800.webp 800w,/assets/img/CS180/Project_2/gaussian_x-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/gaussian_x.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Gaussian + Derivative_x </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/gaussian_y-480.webp 480w,/assets/img/CS180/Project_2/gaussian_y-800.webp 800w,/assets/img/CS180/Project_2/gaussian_y-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/gaussian_y.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Gaussian + Derivative_y </div> </div> </div> <h3 class="text-center text-decoration-underline my-4">Comparison of Combined vs Seperate Convolutions</h3> <p>The resulting partial derivative of Gaussians (DoG) were the same, and putting it through our L2 operator and using the same threshold ended up with the exact same result - except that combining the convolutions together made the operation way faster!</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_combined_Dx-480.webp 480w,/assets/img/CS180/Project_2/camera_man_combined_Dx-800.webp 800w,/assets/img/CS180/Project_2/camera_man_combined_Dx-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_combined_Dx.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> D_x after Gaussian, Combined convolution </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_combined_Dy-480.webp 480w,/assets/img/CS180/Project_2/camera_man_combined_Dy-800.webp 800w,/assets/img/CS180/Project_2/camera_man_combined_Dy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_combined_Dy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> D_y after Gaussian, Combined convolution </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_blur_0.12-480.webp 480w,/assets/img/CS180/Project_2/camera_man_blur_0.12-800.webp 800w,/assets/img/CS180/Project_2/camera_man_blur_0.12-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_blur_0.12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Separate convolutions </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/camera_man_combined_0.12-480.webp 480w,/assets/img/CS180/Project_2/camera_man_combined_0.12-800.webp 800w,/assets/img/CS180/Project_2/camera_man_combined_0.12-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/camera_man_combined_0.12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Combined convolution </div> </div> </div> <p>As expected, we get the same results!</p> <h2 id="task-21-image-sharpening">Task 2.1: Image “Sharpening”</h2> <p>After blurring images, we can try to “unblur” them by “sharpening” them, essentially making the high frequency data (mostly the edges) appear stronger within an image. To do this, we want to essentially do the opposite of the blur filter:</p> <ol> <li>Blur the image with a gaussian filter.</li> <li>Take the original image and subtract it by the blurred image. This leaves the high frequency details</li> <li>Multiply these high frequencies by a muliplier alpha. Add it back to the original image to get our sharpened image.</li> </ol> <p>As with before, we can actually combine these operations into one. To “invert” our low-pass filter (Gaussian filter), we can use a impulse unit filter (matrix the same size as the gaussian filter with 0s everywhere except the center) and subtract it by the low-pass filter. This essentially gives us a high-pass filter. We then arrive at a simple formula:</p> \[(1 + a) * inverse\_low\_filter + low\_pass\_filter\] <p>That will provide us a single convolution that sharpens an image. The result and its intermediary results are shown below.</p> <h3 class="text-center text-decoration-underline my-4">Sharpening the Taj</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/taj-480.webp 480w,/assets/img/CS180/Project_2/taj-800.webp 800w,/assets/img/CS180/Project_2/taj-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/taj.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Taj </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/taj_blur-480.webp 480w,/assets/img/CS180/Project_2/taj_blur-800.webp 800w,/assets/img/CS180/Project_2/taj_blur-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/taj_blur.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Taj Blurred (ksize=2, sigma=1) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/taj_high_frequency-480.webp 480w,/assets/img/CS180/Project_2/taj_high_frequency-800.webp 800w,/assets/img/CS180/Project_2/taj_high_frequency-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/taj_high_frequency.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Taj High frequencies </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/taj_sharpened-480.webp 480w,/assets/img/CS180/Project_2/taj_sharpened-800.webp 800w,/assets/img/CS180/Project_2/taj_sharpened-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/taj_sharpened.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Sharpened Taj (alpha=2) </div> </div> </div> <h3 class="text-center text-decoration-underline my-4">Blurry Cat</h3> <p>Let’s try this out on another blurry image with varying alpha - say this blurry picture of a cat.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/blurry_cat-480.webp 480w,/assets/img/CS180/Project_2/blurry_cat-800.webp 800w,/assets/img/CS180/Project_2/blurry_cat-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/blurry_cat.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Blurry Cat </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/blurry_cat_10-480.webp 480w,/assets/img/CS180/Project_2/blurry_cat_10-800.webp 800w,/assets/img/CS180/Project_2/blurry_cat_10-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/blurry_cat_10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Blurry Cat Sharpened (a=10) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/blurry_cat_15-480.webp 480w,/assets/img/CS180/Project_2/blurry_cat_15-800.webp 800w,/assets/img/CS180/Project_2/blurry_cat_15-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/blurry_cat_15.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Blurry Cat Sharpened (a=15) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/blurry_cat_20-480.webp 480w,/assets/img/CS180/Project_2/blurry_cat_20-800.webp 800w,/assets/img/CS180/Project_2/blurry_cat_20-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/blurry_cat_20.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Blurry Cat Sharpened (a=20) </div> </div> </div> <p>As we can see, the sharpening does appear to make the image less blurry, and as we increase the alpha, the edges get more pronounced. At a certain point though, a higher alpha just makes the edges way too strong - such as in the case of a=20 the lights in the background start looking quite unnatural.</p> <p>But what happens if we try to take a decent picture, blur, and then sharpen it again? Let’s try that on a picture of the Campanile.</p> <h3 class="text-center text-decoration-underline my-4">Blur, Then Sharpen, The Campanile</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/campanile-480.webp 480w,/assets/img/CS180/Project_2/campanile-800.webp 800w,/assets/img/CS180/Project_2/campanile-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/campanile.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Campanile </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/campanile_blur-480.webp 480w,/assets/img/CS180/Project_2/campanile_blur-800.webp 800w,/assets/img/CS180/Project_2/campanile_blur-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/campanile_blur.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Campanile blurred (sigma=3) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/campanile_sharpened-480.webp 480w,/assets/img/CS180/Project_2/campanile_sharpened-800.webp 800w,/assets/img/CS180/Project_2/campanile_sharpened-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/campanile_sharpened.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Campanile sharpened (alpha=5) </div> </div> </div> <p>As we can see here, the sharpened image unfortunately doesn’t look exactly like the original image. Although the edges are sharpened and more discernable than the blurred image, there are elements of the image that sharpening simply can’t recover after being blurred.</p> <h2 id="task-22-hybrid-images">Task 2.2: Hybrid Images</h2> <p>Using the SIGGRAPH 2006 paper by Oliva, Torralba, and Schyns, we can use what we’ve done above to create Hybrid Images! The idea is simple - the human eye works such that at close distances we mostly notice the high frequency details, while far away we notice low frequencies more. Therefore, by taking 2 images and combining the high frequencies of one and the low frequencies of another, we can create hybrid images that look different when seen close vs far away.</p> <p>We’ll first use the class example - Derek and his cat Nutmeg. We’ll take the low frequencies of Derek and the high frequencies of Nutmeg, align the images, and combine them to create CatMan.</p> <h3 class="text-center text-decoration-underline my-4">Cat Man Hybrid</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/DerekPicture-480.webp 480w,/assets/img/CS180/Project_2/DerekPicture-800.webp 800w,/assets/img/CS180/Project_2/DerekPicture-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/DerekPicture.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Derek </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/nutmeg-480.webp 480w,/assets/img/CS180/Project_2/nutmeg-800.webp 800w,/assets/img/CS180/Project_2/nutmeg-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/nutmeg.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.15" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Nutmeg </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/derek_low-480.webp 480w,/assets/img/CS180/Project_2/derek_low-800.webp 800w,/assets/img/CS180/Project_2/derek_low-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/derek_low.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Derek (low frequencies only) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/nutmeg_high-480.webp 480w,/assets/img/CS180/Project_2/nutmeg_high-800.webp 800w,/assets/img/CS180/Project_2/nutmeg_high-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/nutmeg_high.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Nutmeg (high frequencies only) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/cat_man-480.webp 480w,/assets/img/CS180/Project_2/cat_man-800.webp 800w,/assets/img/CS180/Project_2/cat_man-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/cat_man.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Cat Man (Hybrid) </div> </div> </div> <p>If you look closely, cat man appears to be a cat (albeit with faint traces of a man in the background). Zoom out or walk away from the screen though and the cat fades away to reveal Derek.</p> <p>Let’s try some other examples.</p> <h3 class="text-center text-decoration-underline my-4">Hybrid #1: Campanile/Hoover Tower Hybrid</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/campanile-480.webp 480w,/assets/img/CS180/Project_2/campanile-800.webp 800w,/assets/img/CS180/Project_2/campanile-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/campanile.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Campanile </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/stanford-480.webp 480w,/assets/img/CS180/Project_2/stanford-800.webp 800w,/assets/img/CS180/Project_2/stanford-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/stanford.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Hoover Tower </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/campanile_hybrid-480.webp 480w,/assets/img/CS180/Project_2/campanile_hybrid-800.webp 800w,/assets/img/CS180/Project_2/campanile_hybrid-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/campanile_hybrid.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Hybrid Tower </div> </div> </div> <p>Legend has it that Stanford asked Berkeley for the campanile’s height when creating their clock tower, only for Berkeley to lie and give them the wrong measurements so that they create a shorter tower than ours. Inspired by that, here’s a hybrid of two of their most prominent towers. Funnily enough - from this angle it does appear that Stanford’s Hover Tower is shorter.</p> <h3 class="text-center text-decoration-underline my-4">Hybrid #2: The PTSD of CS162 (Failed)</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/ptsd-480.webp 480w,/assets/img/CS180/Project_2/ptsd-800.webp 800w,/assets/img/CS180/Project_2/ptsd-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/ptsd.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> PTSD </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/tyler-480.webp 480w,/assets/img/CS180/Project_2/tyler-800.webp 800w,/assets/img/CS180/Project_2/tyler-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/tyler.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Tyler Post 162 </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/ptsd_tyler-480.webp 480w,/assets/img/CS180/Project_2/ptsd_tyler-800.webp 800w,/assets/img/CS180/Project_2/ptsd_tyler-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/ptsd_tyler.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> PTSD Tyler (failed) </div> </div> </div> <p>Here we have a hybrid image that didn’t work as well. In this picture, I wanted to merge Tyler, my 162 teammate, with the classic art of a soldier experiencing PTSD, to show the visual similarities between a person who endured 162 and a soldier of war. Unfortunately, no matter how far away you look the black pits of the PTSD soldier’s eyes are pretty hard to ignore, overshadowing the lifelessness of Tyler’s eyes. This shows that color is also an important aspect with the hybrid images - solid blocks of pure black (such as in the PTSD soldier’s eyes here) aren’t as affected by the filters, and are prone to sticking out. There’s also the issue that the PTSD soldier’s art was in general a darker hue than Tyler’s picture due to lighting. Perhaps normalization between the two images could’ve helped with this… or maybe that’s just a fundamental difference between the difficulty of going to war vs taking CS162.</p> <h3 class="text-center text-decoration-underline my-4">Hybrid #3: Hybrid Hank</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/hank_happy-480.webp 480w,/assets/img/CS180/Project_2/hank_happy-800.webp 800w,/assets/img/CS180/Project_2/hank_happy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/hank_happy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Happy Hank </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/hank_angry-480.webp 480w,/assets/img/CS180/Project_2/hank_angry-800.webp 800w,/assets/img/CS180/Project_2/hank_angry-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/hank_angry.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Angry Hank </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/hank_hybrid-480.webp 480w,/assets/img/CS180/Project_2/hank_hybrid-800.webp 800w,/assets/img/CS180/Project_2/hank_hybrid-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/hank_hybrid.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Hybrid Hank </div> </div> </div> <p>Here we have my favorite: a merge showing a change of expression for Hank, from the hit show Breaking Bad. Far away, Hank looks relaxed and happy. Upon closer inspection however, he reveals himself to be deeply suspicious and angry about something. The in the expressions made this a popular meme format online, and it was very fun making it into a hybrid image.</p> <p>We can also use FFT to see what were the effects of applying a low and high pass filter to these images, so that we can better understand how it created this hybrid image</p> <h3 class="text-center text-decoration-underline my-4">Hybrid Hank FFT Analaysis</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/fft_hank_happy-480.webp 480w,/assets/img/CS180/Project_2/fft_hank_happy-800.webp 800w,/assets/img/CS180/Project_2/fft_hank_happy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/fft_hank_happy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Happy Hank FFT </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/fft_hank_angry-480.webp 480w,/assets/img/CS180/Project_2/fft_hank_angry-800.webp 800w,/assets/img/CS180/Project_2/fft_hank_angry-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/fft_hank_angry.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Angry Hank FFT </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/fft_hank_happy_low-480.webp 480w,/assets/img/CS180/Project_2/fft_hank_happy_low-800.webp 800w,/assets/img/CS180/Project_2/fft_hank_happy_low-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/fft_hank_happy_low.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Happy Hank Low FFT </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/fft_hank_angry_high-480.webp 480w,/assets/img/CS180/Project_2/fft_hank_angry_high-800.webp 800w,/assets/img/CS180/Project_2/fft_hank_angry_high-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/fft_hank_angry_high.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Angry Hank High FFT </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/fft_hank_hybrid-480.webp 480w,/assets/img/CS180/Project_2/fft_hank_hybrid-800.webp 800w,/assets/img/CS180/Project_2/fft_hank_hybrid-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/fft_hank_hybrid.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Hybrid Hank FFT </div> </div> </div> <p>We can clearly see that, as a result of the low-pass filter, the Fourier transform of Happy Hank has much of the high frequency details removed - all that’s left are low-frequency details as represented by the white horizontal and vertical lines. For Angry Hank, the high-frequency details are way more prevalent. This image was probably successful due to the greyscale nature of the image and the highly compatible nature of the two images - they are literally aligned already and have the same overall structure.</p> <h2 id="task-23-gaussian-and-laplacian-stacks">Task 2.3: Gaussian and Laplacian Stacks</h2> <p>What if we applied the gaussian filter to a image multiple times? Then we get a Gaussian stack, and by subtracting between successive levels of a gaussian stack we get the Laplacian stack instead. Here’s an example with the Orple.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/Orple_stack-480.webp 480w,/assets/img/CS180/Project_2/Orple_stack-800.webp 800w,/assets/img/CS180/Project_2/Orple_stack-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/Orple_stack.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Orple Gaussian + Laplacian Stack </div> </div> </div> <p>The interesting thing here is that by taking the blurriest image in the Gaussian stack and adding it to all the images from the Laplacian Stack, we can get back our original image. This is because each image in the laplacian stack stores the lost information between each successive application of the Gaussian filter.</p> <h2 id="task-24-multiresolution-blending">Task 2.4: Multiresolution Blending</h2> <p>With the Laplacian and Gaussian stacks, we can now do multiresolution blending, (nearly) seamlessly combining two images. To do so, we follow this algorithm:</p> <ol> <li>Create a Gaussian and Laplacian Stack from the two images you’d like to merge</li> <li>Create a mask, with 1s on one half and 0s on the other. The dimensions of the two images and mask must be the same.</li> <li>Create a Gaussian stack from the mask. Let N be the number of levels in all three of these stacks.</li> <li>Multiply Image1_Gaussian[N-1] with Mask_Gaussian[N-1], and Image2_Gaussian[N-1] with (1 - Mask_Gaussian[N-1]).</li> <li>For levels 0 - N-2, multiply Image1’s laplacian with the corresponding mask, and Image2’s laplacian with the corresponding (1-mask).</li> <li>Add all the resulting images from 4-5 together.</li> </ol> <p>As stated before, the blurriest image + the Laplacian stack perfectly recreates the original image. The mask acts as a weight to determine how much a particular pixel on the resultant image should be affected by either image. By applying a Gaussian filter onto the mask, we essentially blur it, and when we apply the different blurred masks to the Laplacian stacks of each image, we get a much more seamless blend of the two images, while still perfectly preserving the details of either image.</p> <h3 class="text-center text-decoration-underline my-4">Orple Blending Process</h3> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/stack_apple-480.webp 480w,/assets/img/CS180/Project_2/stack_apple-800.webp 800w,/assets/img/CS180/Project_2/stack_apple-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/stack_apple.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Laplacian and Gaussian Stack of Apple </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/stack_orange-480.webp 480w,/assets/img/CS180/Project_2/stack_orange-800.webp 800w,/assets/img/CS180/Project_2/stack_orange-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/stack_orange.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Laplacian and Gaussian Stack of Orange </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/stack_mask-480.webp 480w,/assets/img/CS180/Project_2/stack_mask-800.webp 800w,/assets/img/CS180/Project_2/stack_mask-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/stack_mask.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Laplacian and Gaussian Stack of Mask (Laplacian is not used) </div> </div> </div> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/orple-480.webp 480w,/assets/img/CS180/Project_2/orple-800.webp 800w,/assets/img/CS180/Project_2/orple-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/orple.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Result: Orple </div> </div> </div> <h3 class="text-center text-decoration-underline my-4">Blending Example 2: Cat Loaf</h3> <p>Next, I tried to use this technology to figure out why cats sitting with their paws tucked in are referred to as “loafing”</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/cat-480.webp 480w,/assets/img/CS180/Project_2/cat-800.webp 800w,/assets/img/CS180/Project_2/cat-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/cat.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Cat </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/baguette-480.webp 480w,/assets/img/CS180/Project_2/baguette-800.webp 800w,/assets/img/CS180/Project_2/baguette-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/baguette.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Bread Loaf (Baguette) </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/loaf_of_cat-480.webp 480w,/assets/img/CS180/Project_2/loaf_of_cat-800.webp 800w,/assets/img/CS180/Project_2/loaf_of_cat-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/loaf_of_cat.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Loaf of Cat </div> </div> </div> <h3 class="text-center text-decoration-underline my-4">Blending Example 3: Hybrid Kong</h3> <p>For our last example, let’s try cropping out a face and putting it on something else - here I’ve chosen Diddy and Donkey Kong’s portraits from Super Smash Bros.</p> <div class="row align-items-end"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/multi_donkey-480.webp 480w,/assets/img/CS180/Project_2/multi_donkey-800.webp 800w,/assets/img/CS180/Project_2/multi_donkey-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/multi_donkey.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Donkey Kong </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/multi_diddy-480.webp 480w,/assets/img/CS180/Project_2/multi_diddy-800.webp 800w,/assets/img/CS180/Project_2/multi_diddy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/multi_diddy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Diddy Kong </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/multi_donkey_mask-480.webp 480w,/assets/img/CS180/Project_2/multi_donkey_mask-800.webp 800w,/assets/img/CS180/Project_2/multi_donkey_mask-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/multi_donkey_mask.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Mask </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/CS180/Project_2/multi_donkey_hybrid-480.webp 480w,/assets/img/CS180/Project_2/multi_donkey_hybrid-800.webp 800w,/assets/img/CS180/Project_2/multi_donkey_hybrid-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/CS180/Project_2/multi_donkey_hybrid.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="camera man edges 0.2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Hybrid Kong </div> </div> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Cyrus Hung. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-me",title:"Me",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in '_pages/cv.md'. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-teaching",title:"teaching",description:"Materials for courses you taught. Replace this text with your description.",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"dropdown-project-1",title:"Project 1",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-project-2",title:"Project 2",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-project-3",title:"Project 3",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-project-4",title:"Project 4",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"post-google-gemini-updates-flash-1-5-gemma-2-and-project-astra",title:'Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra <svg width="1.2rem" height="1.2rem" top=".5rem" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"We\u2019re sharing updates across our Gemini family of models and a glimpse of Project Astra, our vision for the future of AI assistants.",section:"Posts",handler:()=>{window.open("https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/","_blank")}},{id:"post-displaying-external-posts-on-your-al-folio-blog",title:'Displaying External Posts on Your al-folio Blog <svg width="1.2rem" height="1.2rem" top=".5rem" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"",section:"Posts",handler:()=>{window.open("https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2","_blank")}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-cs180-project-1",title:"CS180 Project 1",description:"Colorizing the Prokudin-Gorskii photo collection",section:"Projects",handler:()=>{window.location.href="/projects/CS180_project_1/"}},{id:"projects-cs180-project-2",title:"CS180 Project 2",description:"Fun with Filters and Frequencies",section:"Projects",handler:()=>{window.location.href="/projects/CS180_project_2/"}},{id:"projects-cs180-project-3",title:"CS180 Project 3",description:"Face Morphing and Modelling a Photo Collection",section:"Projects",handler:()=>{window.location.href="/projects/CS180_project_3/"}},{id:"projects-cs180-project-4",title:"CS180 Project 4",description:"Image Warp + Mosaic",section:"Projects",handler:()=>{window.location.href="/projects/CS180_project_4/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%6C%68%63%79%72%75%73%68%75%6E%67@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>